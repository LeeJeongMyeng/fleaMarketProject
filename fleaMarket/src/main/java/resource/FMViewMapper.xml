<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >	
<mapper namespace="fleaMarket.a03_dao.FMViewDao">
	<!-- 홍보글 상세 조회 -->
	<select id="fmView" resultType="fleamarket" parameterType="string">
		SELECT *
		FROM fleamarket
		WHERE postingNumber = #{postingNumber}			
	</select>	
	
	<!-- 받은 신청 전체 조회(최신순) -->
	<select id="appReceivedList" resultType="fapplication" parameterType="fapplication">
		SELECT fa.*, fm.title, fm.email, m.nickname
		FROM FApplication fa, fleaMarket fm, fleamarketmember m
		WHERE fa.postingNumber = fm.postingNumber
		AND fa.email = m.email
		ORDER BY fa.applicationDate DESC
	</select>
	<!-- 받은 신청 상세 조회 -->
	<select id="appReceivedView" resultType="fapplication" parameterType="int">
		SELECT *
		FROM ApplicationFile
		WHERE applicationNo = #{applicationNo}			
	</select>
	<!-- 받은 신청 승인 -->
	<update id="updateAppRe" parameterType="fapplication">
		UPDATE FApplication
		SET approvalWhether = #{approvalWhether}
		WHERE applicationNo = #{applicationNo}
	</update>
</mapper>		
		